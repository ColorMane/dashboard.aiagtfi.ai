<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIAGT Analytics Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff00;
            min-height: 100vh;
            padding: 20px;
        }
        .dashboard { max-width: 1200px; margin: 0 auto; }
        .header {
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .header h1 { color: #fff; font-size: 2rem; }
        .header p { color: #ccc; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00d4ff;
            text-align: center;
        }
        .stat-card h3 { color: #888; font-size: 0.9rem; margin-bottom: 10px; }
        .stat-card .value { font-size: 2.5rem; color: #00d4ff; font-weight: bold; }
        .stat-card .change { font-size: 0.8rem; color: #00ff00; margin-top: 5px; }
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .chart-card {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #7b2cbf;
        }
        .chart-card h3 { color: #fff; margin-bottom: 15px; }
        .recent-visits {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ffd700;
        }
        .recent-visits h3 { color: #ffd700; margin-bottom: 15px; }
        .visit-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #333;
            color: #888;
        }
        .live-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #00ff00;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .update-time { text-align: center; color: #666; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üìä AIAGT Analytics</h1>
            <p>Website Traffic Dashboard | <span class="live-indicator"></span> Live</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Visits</h3>
                <div class="value" id="totalVisits">-</div>
                <div class="change">‚Üë Real-time</div>
            </div>
            <div class="stat-card">
                <h3>Unique Visitors</h3>
                <div class="value" id="uniqueVisitors">-</div>
                <div class="change">Last 24h</div>
            </div>
            <div class="stat-card">
                <h3>Page Views</h3>
                <div class="value" id="pageViews">-</div>
                <div class="change">Total</div>
            </div>
            <div class="stat-card">
                <h3>Avg. Visit Duration</h3>
                <div class="value" id="avgDuration">-</div>
                <div class="change">2m 34s</div>
            </div>
        </div>
        
        <div class="charts-grid">
            <div class="chart-card">
                <h3>üìà Traffic Over Time</h3>
                <canvas id="trafficChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>üåç Traffic by Country</h3>
                <canvas id="countryChart"></canvas>
            </div>
        </div>
        
        <div class="recent-visits">
            <h3>üïê Recent Activity</h3>
            <div id="recentActivity">
                <div class="visit-item">
                    <span>Loading...</span>
                    <span>-</span>
                </div>
            </div>
        </div>
        
        <div class="update-time">
            Data provided by Cloudflare Analytics
        </div>
    </div>

    <script>
        // Demo data - Replace with actual Cloudflare API data
        const demoData = {
            totalVisits: 1234,
            uniqueVisitors: 567,
            pageViews: 3456,
            trafficHistory: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                data: [45, 32, 89, 156, 134, 98]
            },
            countries: [
                { country: 'US', visits: 456 },
                { country: 'CN', visits: 234 },
                { country: 'DE', visits: 123 },
                { country: 'JP', visits: 89 },
                { country: 'GB', visits: 67 }
            ],
            recentActivity: [
                { time: '10:41:23', page: '/', country: 'US' },
                { time: '10:40:56', page: '/', country: 'CN' },
                { time: '10:38:12', page: '/', country: 'DE' },
                { time: '10:35:44', page: '/', country: 'JP' },
                { time: '10:32:01', page: '/', country: 'US' }
            ]
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
            setInterval(updateDashboard, 30000); // Update every 30 seconds
        });

        function updateDashboard() {
            // Update stats
            document.getElementById('totalVisits').textContent = formatNumber(demoData.totalVisits);
            document.getElementById('uniqueVisitors').textContent = formatNumber(demoData.uniqueVisitors);
            document.getElementById('pageViews').textContent = formatNumber(demoData.pageViews);
            
            // Update charts
            updateTrafficChart();
            updateCountryChart();
            
            // Update recent activity
            updateRecentActivity();
        }

        function formatNumber(num) {
            return num.toLocaleString();
        }

        function updateTrafficChart() {
            const ctx = document.getElementById('trafficChart').getContext('2d');
            if (window.trafficChartInstance) {
                window.trafficChartInstance.destroy();
            }
            window.trafficChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: demoData.trafficHistory.labels,
                    datasets: [{
                        label: 'Visits',
                        data: demoData.trafficHistory.data,
                        borderColor: '#00d4ff',
                        backgroundColor: 'rgba(0, 212, 255, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#333' } },
                        x: { grid: { color: '#333' } }
                    }
                }
            });
        }

        function updateCountryChart() {
            const ctx = document.getElementById('countryChart').getContext('2d');
            if (window.countryChartInstance) {
                window.countryChartInstance.destroy();
            }
            window.countryChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: demoData.countries.map(c => c.country),
                    datasets: [{
                        data: demoData.countries.map(c => c.visits),
                        backgroundColor: ['#00d4ff', '#7b2cbf', '#ffd700', '#ff6b6b', '#00ff00']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { position: 'right' } }
                }
            });
        }

        function updateRecentActivity() {
            const container = document.getElementById('recentActivity');
            container.innerHTML = demoData.recentActivity.map(visit => `
                <div class="visit-item">
                    <span>${visit.country} - ${visit.page}</span>
                    <span>${visit.time}</span>
                </div>
            `).join('');
        }

        // Track page view (add to main site)
        if (window.location.hostname !== 'dashboard.aiagtfi.ai') {
            // Main site - send data to analytics
            fetch('https://api.aiagtfi.ai/track', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    url: window.location.href,
                    referrer: document.referrer,
                    timestamp: Date.now()
                })
            }).catch(() => {}); // Silently fail
        }
    </script>
</body>
</html>
